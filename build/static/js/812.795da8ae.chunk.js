(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[812],{6996:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return M}});var n=s(1413),r=s(70885),a=s(72791),c=s(16030),i=s(56960),l=s(62129),o=s(91139),u=s(10295),d=s(15861),f=s(87757),m=s.n(f),x=s(43504),p=s(94487),h=s(74588),v=s(48950),j=s(47455),b=s(74569),g=s.n(b),w=s(72426),N=s.n(w),y=s(80184),Z=function(e){var t=e._id,s=e.caption,n=e.likes,i=e.comments,o=e.image,u=e.postedBy,f=e.savedBy,b=e.createdAt,w=e.setUsersDialog,Z=e.setUsersList,k=(0,c.I0)(),S=(0,a.useRef)(null),A=(0,c.v9)((function(e){return e.user})).user,C=(0,a.useState)(n),U=(0,r.Z)(C,2),I=U[0],E=U[1],T=(0,a.useState)(i),_=(0,r.Z)(T,2),F=_[0],L=_[1],P=(0,a.useState)(f),O=(0,r.Z)(P,2),D=O[0],H=O[1],M=(0,a.useState)(!1),R=(0,r.Z)(M,2),Y=R[0],z=R[1],B=(0,a.useState)(!1),G=(0,r.Z)(B,2),J=G[0],V=G[1],W=(0,a.useState)(""),q=(0,r.Z)(W,2),X=q[0],K=q[1],Q=(0,a.useState)(!1),$=(0,r.Z)(Q,2),ee=$[0],te=$[1],se=(0,a.useState)(!1),ne=(0,r.Z)(se,2),re=ne[0],ae=ne[1],ce=(0,a.useState)(!1),ie=(0,r.Z)(ce,2),le=ie[0],oe=ie[1],ue=function(){var e=(0,d.Z)(m().mark((function e(){var s,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!Y),e.next=3,k((0,l.n9)(t));case 3:return e.next=5,g().get("/api/v1/post/detail/".concat(t));case 5:s=e.sent,n=s.data,E(n.post.likes);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=(0,d.Z)(m().mark((function e(s){var n,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),e.next=3,k((0,l.Ir)(t,X));case 3:return K(""),e.next=6,g().get("/api/v1/post/detail/".concat(t));case 6:n=e.sent,r=n.data,L(r.post.comments);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=(0,d.Z)(m().mark((function e(){var s,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!J),e.next=3,k((0,l.TJ)(t));case 3:return e.next=5,g().get("/api/v1/post/detail/".concat(t));case 5:s=e.sent,n=s.data,H(n.post.savedBy);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){z(I.some((function(e){return e._id===A._id})))}),[I]),(0,a.useEffect)((function(){V(D.some((function(e){return e===A._id})))}),[D]),(0,y.jsxs)("div",{className:"flex flex-col border rounded bg-white relative",children:[(0,y.jsxs)("div",{className:"flex justify-between px-3 py-2.5 border-b items-center",children:[(0,y.jsxs)("div",{className:"flex space-x-3 items-center",children:[(0,y.jsx)(x.rU,{to:"/".concat(u.username),children:(0,y.jsx)("img",{draggable:"false",className:"w-10 h-10 rounded-full object-cover",src:u.avatar.url,alt:"avatar"})}),(0,y.jsx)(x.rU,{to:"/".concat(u.username),className:"text-black text-sm font-semibold",children:u.username})]}),(0,y.jsx)("span",{className:"cursor-pointer",children:h.hf})]}),(0,y.jsxs)("div",{className:"relative flex items-center justify-center",onDoubleClick:function(){oe(!0),setTimeout((function(){oe(!1)}),500),Y||ue()},children:[(0,y.jsx)("img",{draggable:"false",loading:"lazy",className:"w-full h-full object-cover object-center",src:o.url,alt:"post image"}),le&&(0,y.jsx)("img",{draggable:"false",height:"80px",className:"likeEffect",alt:"heart",src:"https://img.icons8.com/ios-filled/2x/ffffff/like.png"})]}),(0,y.jsxs)("div",{className:"flex flex-col px-4 space-y-1 border-b pb-2 mt-2",children:[(0,y.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,y.jsxs)("div",{className:"flex space-x-4",children:[(0,y.jsx)("button",{onClick:ue,children:Y?p.Uw:h.XO}),(0,y.jsx)("button",{onClick:function(){return S.current.focus()},children:h.CN}),h.Si]}),(0,y.jsx)("button",{onClick:fe,children:J?h.wM:h.x0})]}),(0,y.jsxs)("span",{onClick:function(){w(!0),Z(I)},className:"font-semibold text-sm cursor-pointer",children:[I.length," likes"]}),(0,y.jsxs)("div",{className:"flex flex-auto items-center space-x-1",children:[(0,y.jsx)(x.rU,{to:"/".concat(u.username),className:"text-sm font-semibold hover:underline",children:u.username}),(0,y.jsx)("span",{className:"text-sm",children:s})]}),F.length>0?(0,y.jsx)("span",{onClick:function(){return te(!ee)},className:"text-[13px] text-gray-500 cursor-pointer",children:ee?"Hide Comments":1===F.length?"View ".concat(F.length," Comment"):"View All ".concat(F.length," Comments")}):(0,y.jsx)("span",{className:"text-[13px] text-gray-500",children:"No Comments Yet!"}),(0,y.jsx)("span",{className:"text-xs text-gray-500 cursor-pointer",children:N()(b).fromNow()}),ee&&(0,y.jsx)(j.ZP,{className:"w-full h-52 overflow-y-auto py-1",children:F.map((function(e){return(0,y.jsxs)("div",{className:"flex items-start mb-2 space-x-2",children:[(0,y.jsx)("img",{draggable:"false",className:"h-7 w-7 rounded-full object-cover mr-0.5",src:e.user.avatar.url,alt:"avatar"}),(0,y.jsx)(x.rU,{to:"/".concat(e.user),className:"text-sm font-semibold hover:underline",children:e.user.username}),(0,y.jsx)("p",{className:"text-sm",children:e.comment})]},e._id)}))})]}),(0,y.jsxs)("form",{onSubmit:de,className:"flex items-center justify-between p-3 w-full space-x-3",children:[(0,y.jsx)("span",{onClick:function(){return ae(!re)},className:"cursor-pointer",children:h._1}),re&&(0,y.jsx)("div",{className:"absolute bottom-12 -left-2",children:(0,y.jsx)(v.cW,{set:"google",onSelect:function(e){return K(X+e.native)},title:"Emojis"})}),(0,y.jsx)("input",{className:"flex-auto text-sm outline-none border-none bg-transparent",type:"text",value:X,ref:S,required:!0,onFocus:function(){return ae(!1)},onChange:function(e){return K(e.target.value)},placeholder:"Add a comment..."}),(0,y.jsx)("button",{type:"submit",className:"".concat(X.trim().length<1?"text-blue-300":"text-primary-blue"," text-sm font-semibold"),disabled:X.trim().length<1,children:"Post"})]})]})},k=s(95717),S=(s(53037),s(28688),s(53585)),A=function(e){var t=e.storyIcon,s=e.onClose,n=e.storyUser,c=(0,a.useState)(10),i=(0,r.Z)(c,2),l=i[0],o=i[1],u=(0,a.useState)(100),d=(0,r.Z)(u,2),f=d[0],m=d[1],x=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e=setInterval((function(){l>0?(o((function(e){return e-1})),m(10*(l-1))):(s(),clearInterval(e))}),1e3),t=function(t){console.log("event while click",t),x.current&&!x.current.contains(t.target)&&(s(),clearInterval(e))};return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t),clearInterval(e)}}),[l,s]),(0,y.jsx)("div",{className:"modal-background",children:(0,y.jsxs)("div",{ref:x,className:"modal-content",children:[(0,y.jsx)("div",{className:"timer-bar",style:{width:"".concat(f,"%")}}),(0,y.jsx)("div",{children:(0,y.jsx)("h3",{style:{color:"wheat"},children:n})}),(0,y.jsx)("img",{src:t,alt:"Story Icon"}),(0,y.jsxs)("div",{className:"timer",children:[l,"s"]})]})})},C=function(){var e=(0,a.useState)(null),t=(0,r.Z)(e,2),c=t[0],i=t[1],l=(0,a.useState)(!1),o=(0,r.Z)(l,2),u=o[0],d=o[1],f=(0,a.useState)(null),m=(0,r.Z)(f,2),x=m[0],p=m[1];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(k.Z,(0,n.Z)((0,n.Z)({},{dots:!1,infinite:!1,speed:500,slidesToShow:7.5,slidesToScroll:3,responsive:[{breakpoint:1050,settings:{slidesToShow:5,slidesToScroll:3}},{breakpoint:400,settings:{slidesToShow:4,slidesToScroll:2}}]}),{},{className:"w-full bg-white pt-2.5 pb-1 px-2.5 flex overflow-hidden border rounded",children:S.OW.map((function(e,t){return(0,y.jsxs)("div",{className:"flex flex-col text-center justify-center items-center p-2 cursor-pointer",children:[(0,y.jsx)("div",{className:"w-16 p-[1px] h-16 rounded-full border-2 border-red-500",children:(0,y.jsx)("img",{onClick:function(){return t=s(17487)("./".concat(e.image,".webp")),n=e.title,i(t),p(n),void d(!0);var t,n},loading:"lazy",className:"rounded-full h-full w-full border border-gray-300 object-cover",src:s(17487)("./".concat(e.image,".webp")),draggable:"false",alt:"story"})}),(0,y.jsx)("span",{className:"text-xs",children:e.title})]},t)}))})),u&&(0,y.jsx)(A,{storyUser:x,storyIcon:c,onClose:function(){i(null),p(null),d(!1)}})]})},U=s(14771),I=s(73356),E=s(47047),T=function(){return(0,y.jsxs)("div",{className:"flex flex-col border w-full my-4 rounded bg-white",children:[(0,y.jsxs)("div",{className:"flex items-center gap-2 p-2",children:[(0,y.jsx)(E.Z,{animation:"wave",variant:"circular",width:40,height:40}),(0,y.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,y.jsx)(E.Z,{height:10,variant:"rectangular",width:"25%",animation:"wave"}),(0,y.jsx)(E.Z,{height:10,variant:"rectangular",width:"20%",animation:"wave"})]})]}),(0,y.jsx)(E.Z,{sx:{height:520},animation:"wave",variant:"rectangular"})]})},_=function(){var e=(0,c.I0)(),t=(0,a.useState)([]),s=(0,r.Z)(t,2),d=s[0],f=s[1],m=(0,a.useState)(!1),x=(0,r.Z)(m,2),p=x[0],h=x[1],v=(0,a.useState)(2),j=(0,r.Z)(v,2),b=j[0],g=j[1],w=(0,c.v9)((function(e){return e.newPost})).newPostAndFetch,N=(0,c.v9)((function(e){return e.postOfFollowing})),k=N.loading,S=N.error,A=N.posts,E=N.totalPosts,_=(0,c.v9)((function(e){return e.likePost})),F=_.error,L=_.message,P=_.success,O=(0,c.v9)((function(e){return e.newComment})),D=O.error,H=O.success,M=(0,c.v9)((function(e){return e.savePost})),R=M.error,Y=M.success,z=M.message;(0,a.useEffect)((function(){w&&(e((0,l.xm)()),e({type:o.T_}))}),[e,w]),(0,a.useEffect)((function(){S&&(i.Am.error(S),e((0,l.b9)())),e((0,l.xm)()),e({type:o.T_})}),[e,S]),(0,a.useEffect)((function(){F&&(i.Am.error(F),e((0,l.b9)())),P&&(i.Am.success(L),e({type:o.c2})),D&&(i.Am.error(D),e((0,l.b9)())),H&&(i.Am.success("Comment Added"),e({type:o.j4})),R&&(i.Am.error(R),e((0,l.b9)())),Y&&(i.Am.success(z),e({type:o.Y9}))}),[e,P,F,L,D,H,R,Y,z,w]);return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:"flex flex-col w-full lg:w-2/3 sm:mt-6 sm:px-8 mb-8",children:[(0,y.jsx)(C,{}),k&&Array(5).fill("").map((function(e,t){return(0,y.jsx)(T,{},t)})),(0,y.jsx)(U.Z,{dataLength:A.length,next:function(){g((function(e){return e+1})),e((0,l.xm)(b))},hasMore:A.length!==E,loader:(0,y.jsx)(I.Z,{}),children:(0,y.jsx)("div",{className:"w-full h-full mt-1 sm:mt-6 flex flex-col space-y-4",children:null===A||void 0===A?void 0:A.map((function(e){return(0,y.jsx)(Z,(0,n.Z)((0,n.Z)({},e),{},{setUsersDialog:h,setUsersList:f}),e._id)}))})}),(0,y.jsx)(u.Z,{title:"Likes",open:p,onClose:function(){return h(!1)},usersList:d})]})})},F=s(37689),L=s(38278),P=s(56503),O=function(e){var t=e._id,s=e.username,n=e.avatar,i=(0,c.I0)(),l=(0,a.useState)(!1),o=(0,r.Z)(l,2),u=o[0],d=o[1];return(0,y.jsxs)("div",{className:"flex justify-between items-center",children:[(0,y.jsxs)("div",{className:"flex space-x-3 items-center",children:[(0,y.jsx)(x.rU,{to:"/".concat(s),children:(0,y.jsx)("img",{draggable:"false",className:"w-9 h-9 rounded-full object-cover",src:n.url,alt:"avatar"})}),(0,y.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,y.jsx)(x.rU,{to:"/".concat(s),className:"text-black text-sm font-semibold hover:underline",children:s}),(0,y.jsx)("span",{className:"text-gray-400 text-xs",children:"New to Instagram"})]})]}),(0,y.jsx)("button",{onClick:function(){d(!u),i((0,F.P_)(t))},className:"".concat(u?"text-red-500":"text-blue-500"," text-xs font-medium"),children:u?"Unfollow":"Follow"})]})},D=function(){var e=(0,c.I0)(),t=(0,c.v9)((function(e){return e.user})).user,s=(0,c.v9)((function(e){return e.allUsers})),r=s.error,l=s.users,o=s.loading,u=(0,c.v9)((function(e){return e.followUser})),d=u.error,f=u.success,m=u.message;return(0,a.useEffect)((function(){r&&(i.Am.error(r),e((0,F.b9)())),e((0,F.mf)())}),[e,r]),(0,a.useEffect)((function(){d&&(i.Am.error(d),e((0,F.b9)())),f&&(i.Am.success(m),e({type:L.y9}))}),[f,d]),(0,y.jsx)("div",{className:"fixed lg:right-32 xl:right-56 w-3/12 h-full hidden lg:flex flex-col flex-auto m-8 mt-12 pr-8 -z-1",children:(0,y.jsxs)("div",{className:"ml-10 flex flex-col p-2",children:[(0,y.jsxs)("div",{className:"flex justify-between items-center",children:[(0,y.jsxs)("div",{className:"flex flex-auto space-x-4 items-center",children:[(0,y.jsx)(x.rU,{to:"/".concat(t.username),children:(0,y.jsx)("img",{draggable:"false",className:"w-14 h-14 rounded-full object-cover",src:t.avatar.url,alt:t.name})}),(0,y.jsxs)("div",{className:"flex flex-col",children:[(0,y.jsx)(x.rU,{to:"/".concat(t.username),className:"text-black text-sm font-semibold",children:t.username}),(0,y.jsx)("span",{className:"text-gray-400 text-sm",children:t.name})]})]}),(0,y.jsx)("span",{className:"text-blue-500 text-xs font-semibold cursor-pointer",children:"Switch"})]}),(0,y.jsxs)("div",{className:"flex justify-between items-center mt-5",children:[(0,y.jsx)("p",{className:"font-semibold text-gray-500 text-sm",children:"Suggestions For You"}),(0,y.jsx)("span",{className:"text-black text-xs font-semibold cursor-pointer",children:"See All"})]}),(0,y.jsx)("div",{className:"flex flex-col flex-auto mt-3 space-y-3.5",children:o?Array(5).fill("").map((function(e,t){return(0,y.jsx)(P.Z,{},t)})):null===l||void 0===l?void 0:l.map((function(e){return(0,a.createElement)(O,(0,n.Z)((0,n.Z)({},e),{},{key:e._id}))}))}),(0,y.jsxs)("div",{className:"flex flex-col mt-8 space-y-6 text-xs text-gray-400",children:[(0,y.jsxs)("div",{className:"flex flex-col",children:[(0,y.jsx)("div",{className:"flex items-center space-x-1.5",children:["About","Help","API","Jobs","Privacy","Terms","Locations"].map((function(e,t){return(0,y.jsx)("a",{href:"#",children:e},t)}))}),(0,y.jsx)("div",{className:"flex items-center space-x-1.5",children:["Top Accounts","Hashtags","Language"].map((function(e,t){return(0,y.jsx)("a",{href:"#",children:e},t)}))})]}),(0,y.jsxs)("span",{children:["\xa9 ",(new Date).getFullYear()," INSTAGRAM FROM ASHISH AGNIHOTRI"]})]})]})})},H=s(6038),M=function(){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(H.Z,{title:"Instagram"}),(0,y.jsxs)("div",{className:"flex h-full md:w-4/5 lg:w-4/6 mt-14 mx-auto",children:[(0,y.jsx)(_,{}),(0,y.jsx)(D,{})]})]})}},56503:function(e,t,s){"use strict";var n=s(47047),r=s(80184);t.Z=function(){return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(n.Z,{animation:"wave",variant:"circular",width:45,height:40}),(0,r.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,r.jsx)(n.Z,{height:15,variant:"rectangular",width:"60%",animation:"wave"}),(0,r.jsx)(n.Z,{height:12,variant:"rectangular",width:"30%",animation:"wave"})]})]})}},17487:function(e,t,s){var n={"./axios.webp":23667,"./expressjs.webp":74033,"./javascript.webp":44338,"./mongodb.webp":15735,"./mui.webp":25916,"./multer.webp":78501,"./nodejs.webp":9562,"./reactjs.webp":64489,"./redux.webp":21409,"./sendgrid.webp":41207,"./socketio.webp":2354,"./tailwind.webp":38970,"./toastify.webp":75889};function r(e){var t=a(e);return s(t)}function a(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=a,e.exports=r,r.id=17487},23667:function(e,t,s){"use strict";e.exports=s.p+"static/media/axios.56fc2f13fcebf9762c0c.webp"},74033:function(e,t,s){"use strict";e.exports=s.p+"static/media/expressjs.a2e86fd3965b0781dc31.webp"},44338:function(e,t,s){"use strict";e.exports=s.p+"static/media/javascript.70416db3411be6deeb08.webp"},15735:function(e,t,s){"use strict";e.exports=s.p+"static/media/mongodb.d753b795305bda0741bb.webp"},25916:function(e,t,s){"use strict";e.exports=s.p+"static/media/mui.c78de51d000137fbffd3.webp"},78501:function(e,t,s){"use strict";e.exports=s.p+"static/media/multer.c2a3c0310a42b05e0188.webp"},9562:function(e,t,s){"use strict";e.exports=s.p+"static/media/nodejs.90478dd570aa54a25de3.webp"},64489:function(e,t,s){"use strict";e.exports=s.p+"static/media/reactjs.67281ba7f66d2108f454.webp"},21409:function(e,t,s){"use strict";e.exports=s.p+"static/media/redux.51aa90023ce0ceaa0082.webp"},41207:function(e,t,s){"use strict";e.exports=s.p+"static/media/sendgrid.fce5f541441ff976d2dd.webp"},2354:function(e,t,s){"use strict";e.exports=s.p+"static/media/socketio.aafffdfd652a68a2d466.webp"},38970:function(e,t,s){"use strict";e.exports=s.p+"static/media/tailwind.89af3bced34f432936d5.webp"},75889:function(e,t,s){"use strict";e.exports=s.p+"static/media/toastify.08fda808d10d7ed9dada.webp"}}]);
//# sourceMappingURL=812.795da8ae.chunk.js.map